---
title: "Example Analysis Report (Radiology)"
author: "Hyeon Yu, MD"
date: "`r format(Sys.Date())`"
output:
  html_document:
    toc: true
    toc_depth: 2
    theme: cosmo
    number_sections: true
---

> This report demonstrates a **reproducible workflow**: analysis → figures → report, using the structure in `04_r_basics/`.

## 1. Setup

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

```{r libraries}
library(stats)
```

## 2. Run or Source Analysis

For teaching purposes, we **simulate** data within the report. In a production project, you would instead **source** scripts from `analysis/` and **read inputs** from `data/`.

```{r simulate}
set.seed(42)
N <- 120
age <- rnorm(N, 62, 10)
BMI <- rnorm(N, 27, 4)
sm_area <- 140 - 0.4*age + 0.8*BMI + rnorm(N,0,8)
```

```{r fit}
fit <- lm(sm_area ~ age + BMI)
summary(fit)
```

## 3. Insert Figures from `figures/`

We can create figures on-the-fly or include figures previously saved by scripts in `04_r_basics/figures/`.

```{r fig-inline, fig.cap="Scatter plot with fitted line"}
plot(age, sm_area, pch=19, col='darkgray', xlab='Age', ylab='Skeletal Muscle Area')
abline(fit, col='red', lwd=2)
```

To include a saved figure (e.g., from `Fig1_KM_survival.R`):

```{r fig-read, echo=FALSE, out.width='70%'}
knitr::include_graphics("../figures/Fig1_KM_TACE_vs_TARE.png")
```

## 4. Tabular Results

```{r table}
coef_table <- cbind(Estimate = coef(fit), confint(fit))
knitr::kable(coef_table, digits = 3, caption = 'Linear regression coefficients with 95% CIs')
```

## 5. Reproducibility Notes

- Analyses should live in `analysis/`
- Figures should be generated by scripts in `figures/` (not manually)
- Reports should **not** compute heavy models; they should **assemble** results

*End of example.*
